{"version":3,"sources":["js003.js"],"names":["btns","document","querySelector","currNum","currSent","numStr","Ans","cal","checkEqual","clearCalculation","innerHTML","addEventListener","count","e","target","nodeName","valNum","Number","textContent","valStr","calculate","ary","split","splice","join","isNaN","findComma","find","item","length","push","str","forEach","val","index","eval"],"mappings":"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","sourcesContent":["let btns = document.querySelector('.btnsWrap');\r\nlet currNum = document.querySelector('.currNum');\r\nlet currSent = document.querySelector('.currSent');\r\n\r\n//現在剛按下去的按鈕(大字、白色的那個)， eg: a+b=c  也就是b\r\nlet numStr = '';\r\n//基本上只會短暫的在按\"=\"後有值，function結束就會清除\r\nlet Ans = '';\r\n//就是藍色的那個計算式\r\nlet cal = [];\r\n\r\n//判斷如果有按過 \"=\" 則為ture，進入function清除計算欄後 checkEqual 變回 false\r\nlet checkEqual = false;\r\nfunction clearCalculation(){\r\n\tif(!checkEqual) return\r\n\tcurrSent.innerHTML = ''\r\n\tcheckEqual = false\r\n}\r\n\r\n\r\nbtns.addEventListener('click', count);\r\n\r\nfunction count(e) {\r\n\t//判斷點擊是否為LI\r\n\tif (e.target.nodeName !== 'LI') return\r\n\r\n\t//字串轉為數字\r\n\tlet valNum = Number(e.target.textContent);\r\n\t//點擊的字串\r\n\tlet valStr = e.target.textContent;\r\n\r\n\tcalculate(valNum, valStr);\r\n\r\n\t//判斷點擊刪除鍵\r\n\tif (e.target.textContent == \"delete\" || e.target.nodeName == 'I') {\r\n\t\tlet ary = numStr.split('');\r\n\t\tary.splice(-1, 1);\r\n\t\tnumStr = ary.join('');\r\n\t\tcurrNum.innerHTML = numStr;\r\n\t}\r\n}\r\n\r\nfunction calculate(valNum, valStr) {\r\n\t//判斷點擊若為數字或'.'則繼續執行\r\n\tif (!isNaN(valNum) || valStr == '.') {\r\n\t\t// 判斷是否刪除運算式\r\n\t\tclearCalculation();\r\n\t\tif (Ans !== '') {\r\n\t\t\tcurrSent.innerHTML = '';\r\n\t\t\tAns = '';\r\n\t\t}\r\n\r\n\t\t//findComma -> 若有'.'則回傳'.'\r\n\t\tlet findComma = numStr.split('').find(function (item) {\r\n\t\t\treturn item === \".\"\r\n\t\t});\r\n\r\n\t\t//若vlaStr已經包含'.'且按的是'.'，則不繼續執行\r\n\t\tif (findComma === \".\" && valStr === '.') return\r\n\r\n\t\t//避免000.00的狀況發生\r\n\t\tif (Number(valStr) === 0 && numStr == 0 && findComma !== '.') {\r\n\t\t\tnumStr = '0';\r\n\t\t} else {\r\n\t\t\t//加入點擊按鈕進入numStr\r\n\t\t\tnumStr = numStr += valStr;\r\n\t\t}\r\n\t\tcurrNum.innerHTML = numStr;\r\n\r\n\t} else if (valStr == 'AC') {  //判斷點擊'AC'，清除輸入欄\r\n\t\tnumStr = '';\r\n\t\tAns = '';\r\n\t\tcal = [];\r\n\t\tcurrNum.innerHTML = '';\r\n\t\tcurrSent.innerHTML = '';\r\n\t} else if (valStr === '÷' || valStr === '×' || valStr === '+' || valStr === '−') {\r\n\t\t//加入陣列\r\n\t\tif (cal.length === 0 && !numStr) return\r\n\t\tif (numStr === '') {\r\n\t\t\tcal[cal.length - 1] = valStr;\r\n\t\t} else {\r\n\t\t\tcal.push(Number(numStr), valStr);\r\n\t\t\t//清空輸入區\r\n\t\t\tcurrNum.innerHTML = '';\r\n\t\t}\r\n\t\t//呈現運算區\r\n\t\tlet str = ''\r\n\t\tcal.forEach(function (val) {\r\n\t\t\tstr += ' ' + val\r\n\t\t});\r\n\t\tcurrSent.innerHTML = str;\r\n\t\tnumStr = '';\r\n\t} else if (valStr == '=') {\r\n\r\n\t\t// 沒有算式就不執行\r\n\t\tif(cal.length===0) return\r\n\t\t\r\n\t\t//再做一次\r\n\t\tif (numStr !== '') {\r\n\t\t\tcal.push(Number(numStr));\r\n\t\t\t//清空輸入區\r\n\t\t\tcurrNum.innerHTML = '';\r\n\t\t}\r\n\r\n\t\t//呈現運算式子\r\n\t\tlet str = ''\r\n\t\tcal.forEach(function (val) {\r\n\t\t\tstr += ' ' + val\r\n\t\t});\r\n\t\tcurrSent.innerHTML = str;\r\n\t\tnumStr = '';\r\n\r\n\t\t//把符號轉為JS看的懂的運算符號\r\n\t\tcal.forEach(function (item, index) {\r\n\t\t\tswitch (item) {\r\n\t\t\t\tcase \"×\":\r\n\t\t\t\t\tcal[index] = '*';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"÷\":\r\n\t\t\t\t\tcal[index] = '/';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"+\":\r\n\t\t\t\t\tcal[index] = '+';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"−\":\r\n\t\t\t\t\tcal[index] = '-';\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tAns = eval(cal.join(''));\r\n\t\tcurrNum.innerHTML = Ans;\r\n\t\tAns = '';\r\n\t\tcal = [];\r\n\t\tcheckEqual = true;\r\n\t}\r\n}"],"file":"js003.js"}